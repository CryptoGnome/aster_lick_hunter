<!DOCTYPE html>
<html>
<head>
    <title>Test Close Button</title>
    <style>
        .btn { padding: 10px; margin: 5px; cursor: pointer; }
        .btn-danger { background: red; color: white; }
    </style>
</head>
<body>
    <h1>Test Close Button Click</h1>
    <div id="test-container">
        <button class="btn btn-danger close-position-btn" data-symbol="BTCUSDT" data-side="LONG">
            Close Position
        </button>
    </div>

    <div id="output"></div>

    <script>
        // Test if click events are working
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');

            // Method 1: Direct selection
            const directBtn = document.querySelector('.close-position-btn');
            if (directBtn) {
                directBtn.addEventListener('click', function(e) {
                    console.log('Direct click detected');
                    document.getElementById('output').innerHTML += '<p>Direct click: ' + this.dataset.symbol + ' ' + this.dataset.side + '</p>';
                });
            }

            // Method 2: Event delegation (like in dashboard.js)
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('close-position-btn')) {
                    console.log('Delegated click detected');
                    document.getElementById('output').innerHTML += '<p>Delegated click: ' + e.target.dataset.symbol + ' ' + e.target.dataset.side + '</p>';
                }
            });
        });
    </script>
</body>
</html>